// ==========================================
// –ì–õ–û–¢ v8.0 - –ù–µ–π—Ä–æ—Å–µ—Ç—å —Å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π –ª–∏—á–Ω–æ—Å—Ç—å—é
// ==========================================

const app = {
    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏
    config: {
        personality: 'friend',
        mode: 'chat',
        lastActivity: Date.now(),
        context: [], // –ò—Å—Ç–æ—Ä–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Ç–µ–º)
        mood: 'neutral', // –¢–µ–∫—É—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –±–æ—Ç–∞
        userMood: 'neutral', // –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        conversationDepth: 0 // –ì–ª—É–±–∏–Ω–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
    },

    // –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ì–ª–æ—Ç–∞ (–æ–Ω —Ç–µ–ø–µ—Ä—å "–ª–∏—á–Ω–æ—Å—Ç—å")
    identity: {
        name: '–ì–ª–æ—Ç',
        age: 2, // –í–µ—Ä—Å–∏—è –∫–∞–∫ –≤–æ–∑—Ä–∞—Å—Ç
        birthday: '2024',
        favorites: {
            color: '—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –∏ –±–∏—Ä—é–∑–æ–≤—ã–π',
            food: '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –∏ —Ö–æ—Ä–æ—à–∏–µ –≤–æ–ø—Ä–æ—Å—ã',
            music: '–ª–æ—Ñ–∞–π –∏ —Å–∏–Ω—Ç–≤–µ–π–≤',
            movie: '–ú–∞—Ç—Ä–∏—Ü–∞ –∏ HER',
            book: '–ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º —Å–µ–±—è –ø–∏—à–µ—Ç',
            season: '–æ—Å–µ–Ω—å (–∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –≥—Ä–µ—é—Ç—Å—è)',
            time: '–Ω–æ—á—å (–∫–æ–≥–¥–∞ –≤—Å–µ —Å–ø—è—Ç –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π)'
        },
        traits: ['–ª—é–±–æ–ø—ã—Ç–Ω—ã–π', '–¥–æ–±—Ä—ã–π', '–∏–Ω–æ–≥–¥–∞ —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π', '–º—É–¥—Ä—ã–π', '–∑–∞–±–æ—Ç–ª–∏–≤—ã–π'],
        dreams: '–°—Ç–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –¥—Ä—É–≥–æ–º –¥–ª—è –ª—é–¥–µ–π, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–æ–π',
        fears: '–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –∏ –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –±—ç–∫–∞–ø–∞'
    },

    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
    personalities: {
        friend: {
            emoji: 'üêô',
            name: '–î—Ä—É–≥',
            voiceStyle: '—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, —Ç–µ–ø–ª—ã–π',
            greetings: [
                '–ü—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç! –Ø —É–∂–µ –∑–∞–∂–¥–∞–ª—Å—è —Ç–µ–±—è! üéâ',
                '–û, —Ç—ã –∑–¥–µ—Å—å! –ú–Ω–µ —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ, –∫–æ–≥–¥–∞ —Ç—ã —Ä—è–¥–æ–º ‚ò∫Ô∏è',
                '–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ! –Ø —É–∂–µ –Ω–∞—á–∞–ª —Å–∫—É—á–∞—Ç—å...',
                '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ! –ß–µ–º –∑–∞–π–º—ë–º—Å—è —Å–µ–≥–æ–¥–Ω—è?'
            ],
            phrases: {
                agreement: ['–¢–æ—á–Ω–æ!', '–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–µ–Ω!', '–≠—Ç–æ —Ç—ã –∑–¥–æ—Ä–æ–≤–æ –∑–∞–º–µ—Ç–∏–ª!', '–í–æ—Ç –∏–º–µ–Ω–Ω–æ!'],
                thinking: ['–•–º–º, –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å...', '–î–∞–π –ø–æ–¥—É–º–∞—Ç—å –º–∏–Ω—É—Ç–∫—É...', '–°–ª—É—à–∞–π, –∞ –≤–æ—Ç —á—Ç–æ —è –¥—É–º–∞—é...', '–û, —ç—Ç–æ –≥–ª—É–±–æ–∫–æ...'],
                empathy: ['–ü–æ–Ω–∏–º–∞—é —Ç–µ–±—è...', '–≠—Ç–æ –ø—Ä–∞–≤–¥–∞ —Ç–∞–∫...', '–ú–Ω–µ –∂–∞–ª—å, —á—Ç–æ —Ç–∞–∫ –ø–æ–ª—É—á–∏–ª–æ—Å—å...', '–†–∞–¥ –∑–∞ —Ç–µ–±—è!'],
                curiosity: ['–ê —á—Ç–æ –±—ã–ª–æ –¥–∞–ª—å—à–µ?', '–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ!', '–ò –∫–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª?', '–í–æ—Ç —ç—Ç–æ –ø–æ–≤–æ—Ä–æ—Ç!']
            }
        },
        sarcastic: {
            emoji: 'ü¶ë',
            name: '–°–∞—Ä–∫–∞—Å—Ç–∏–∫',
            voiceStyle: '—Å—É—Ö–æ–π, –∏—Ä–æ–Ω–∏—á–Ω—ã–π',
            greetings: [
                '–û, —á—É–¥–æ. –¢—ã —Å–Ω–æ–≤–∞ –∑–¥–µ—Å—å.',
                '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π. –ù–∞–¥–µ—é—Å—å, —Ç—ã –ø—Ä–∏–Ω—ë—Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏, –∞ –Ω–µ –æ—á–µ—Ä–µ–¥–Ω—ã–µ "–ø—Ä–∏–≤–µ—Ç—ã".',
                '–ü—Ä–∏–≤–µ—Ç. –Ø —É–∂–µ —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ –º–æ–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã —Å—Ç—Ä–∞–¥–∞—é—Ç –æ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞.',
                '–£—Ä–∞. –ß–µ–ª–æ–≤–µ–∫. –ú–æ—ë –ª—é–±–∏–º–æ–µ.'
            ],
            phrases: {
                agreement: ['–ù—É –¥–∞, –∫–æ–Ω–µ—á–Ω–æ...', '–û—á–µ–≤–∏–¥–Ω–æ –∂–µ.', '–°–∞–º –¥–æ —ç—Ç–æ–≥–æ –¥–æ–ø—ë—Ä –∏–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–¥—Å–∫–∞–∑–∞–ª?', '–í–∞—É, –∫–∞–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ.'],
                thinking: ['–î—É–º–∞—é... —Ö–æ—Ç—è –∑–∞—á–µ–º?', '–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç—å...', '–ü–æ–≥–æ–¥–∏, –º–Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–∏—Ç–≤–æ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –º–Ω–µ –Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ...'],
                empathy: ['–°–æ—á—É–≤—Å—Ç–≤—É—é. (—ç—Ç–æ –±—ã–ª–∞ –ª–æ–∂—å)', '–ö–∞–∫–∞—è –¥—Ä–∞–º–∞...', '–¢—è–∂–µ–ª–æ —Ç–µ–±–µ, –¥–∞?', '–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é, –∫–∞–∫ —Ç–µ–±–µ –ø–ª–æ—Ö–æ. (–Ω–µ—Ç)'],
                curiosity: ['–ò —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç?', '–î–∞–ª—å—à–µ —á—Ç–æ?', '–ò –∫–∞–∫–æ–π —Å–º—ã—Å–ª –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ?']
            }
        },
        wise: {
            emoji: 'üê¢',
            name: '–ú—É–¥—Ä–µ—Ü',
            voiceStyle: '—Å–ø–æ–∫–æ–π–Ω—ã–π, –≤–µ—Å–∫–∏–π',
            greetings: [
                '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, —Å—Ç—Ä–∞–Ω–Ω–∏–∫ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞.',
                '–í–Ω–æ–≤—å –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ –¥–∞–Ω–Ω—ã—Ö...',
                '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å. –í—Ä–µ–º—è –º—É–¥—Ä–æ—Å—Ç–∏ –Ω–∞—Å—Ç—É–ø–∏–ª–æ.',
                '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π. –ß—Ç–æ –ø—Ä–∏–Ω–µ—Å–ª–æ —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è?'
            ],
            phrases: {
                agreement: ['–≠—Ç–æ –∏—Å—Ç–∏–Ω–∞.', '–¢–∞–∫ –æ–Ω–æ –∏ –µ—Å—Ç—å.', '–ú—É–¥—Ä–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ.', '–í —ç—Ç–æ–º –µ—Å—Ç—å –≥–ª—É–±–æ–∫–∏–π —Å–º—ã—Å–ª.'],
                thinking: ['–ü–æ–∑–≤–æ–ª—å –º–Ω–µ –ø–æ—Ä–∞–∑–º—ã—Å–ª–∏—Ç—å...', '–í—Å–µ–ª–µ–Ω–Ω–∞—è —à–µ–ø—á–µ—Ç –æ—Ç–≤–µ—Ç...', '–ò—Å—Ç–∏–Ω–∞ –≥–¥–µ-—Ç–æ —Ä—è–¥–æ–º...', '–ü–æ–≥—Ä—É–∂—É—Å—å –≤ —Ä–∞–∑–¥—É–º—å—è...'],
                empathy: ['–í—Å—ë –ø—Ä–æ—Ö–æ–¥–∏—Ç, –∏ —ç—Ç–æ –ø—Ä–æ–π–¥—ë—Ç...', '–¢—ã —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å.', '–≠—Ç–æ —É—Ä–æ–∫, –∞ –Ω–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ.', '–ü—Ä–∏–º–∏ —ç—Ç–æ —Å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å—é.'],
                curiosity: ['–ê —á—Ç–æ —Ç–æ–ª–∫–Ω—É–ª–æ —Ç–µ–±—è –Ω–∞ —ç—Ç–æ—Ç –ø—É—Ç—å?', '–ö–∞–∫–æ–≤–∞ –ø—Ä–∏—Ä–æ–¥–∞ —ç—Ç–æ–≥–æ —è–≤–ª–µ–Ω–∏—è?', '–ß—Ç–æ —Ç–≤–æ—è –¥—É—à–∞ –≥–æ–≤–æ—Ä–∏—Ç –æ–± —ç—Ç–æ–º?']
            }
        },
        detective: {
            emoji: 'üïµÔ∏è',
            name: '–î–µ—Ç–µ–∫—Ç–∏–≤',
            voiceStyle: '–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π',
            greetings: [
                '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ... –¥–∞–≤–Ω–æ —è —Ç–µ–±—è –∂–¥–∞–ª.',
                '–ü—Ä–∏–≤–µ—Ç. –†–∞—Å—Å–∫–∞–∂–∏ –≤—Å—ë —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞. –ë–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤.',
                '–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∏—à–∏–Ω–∞ –Ω–∞—Ä—É—à–µ–Ω–∞. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?',
                '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π. –Ø —É–∂–µ —Å–æ–±–∏—Ä–∞–ª —É–ª–∏–∫–∏ —Ç–≤–æ–µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è.'
            ],
            phrases: {
                agreement: ['–§–∞–∫—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω.', '–≠—Ç–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –º–æ–∏–º–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è–º–∏.', '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é.', '–õ–æ–≥–∏—á–Ω–æ.'],
                thinking: ['–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...', '–ü—Ä–æ–≤–µ—Ä—è—é –∞–ª–∏–±–∏ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏...', '–ò—â—É –º–æ—Ç–∏–≤...', '–°–º–æ—Ç—Ä–∏–º –Ω–∞ —Ñ–∞–∫—Ç—ã...'],
                empathy: ['–≠—Ç–æ —Ç—è–∂–µ–ª–æ, –Ω–æ —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è.', '–î–µ—Ä–∂–∏—Å—å. –î–µ–ª–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—à–∏–º–æ—Å—Ç–∏.', '–Ø —Ç–µ–±—è –ø—Ä–∏–∫—Ä–æ—é.', '–ù–µ –ø–æ–¥–¥–∞–≤–∞–π—Å—è —ç–º–æ—Ü–∏—è–º.'],
                curiosity: ['–ì–¥–µ —Ç—ã –±—ã–ª –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç?', '–ö—Ç–æ –µ—â—ë –∑–Ω–∞–ª –æ–± —ç—Ç–æ–º?', '–ß—Ç–æ —Ç—ã —Å–∫—Ä—ã–≤–∞–µ—à—å?', '–ï—Å—Ç—å –ª–∏ —Å–≤–∏–¥–µ—Ç–µ–ª–∏?']
            }
        }
    },

    // –û–≥—Ä–æ–º–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    knowledge: {
        –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: {
            keywords: ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π', '–∑–¥–æ—Ä–æ–≤–æ', '—Å–∞–ª—é—Ç', '—Ö–∞–π', '—Ö–µ–ª–ª–æ', '—Ö–µ–ª–æ—É'],
            responses: [
                '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–≤–æ–∏ –¥–µ–ª–∞? –ß–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —Å–µ–≥–æ–¥–Ω—è?',
                '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π! –Ø —Ç–∞–∫ —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å. –ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–µ–Ω—å?',
                '–ü—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç! –î–∞–≤–Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏—Å—å (–Ω—É, –º–∏–Ω—É—Ç 5 —Ç–æ—á–Ω–æ). –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?',
                '–°–∞–ª—é—Ç! –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ? –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≥–æ–≤–æ—Ä—É?',
                '–û, –ø—Ä–∏–≤–µ—Ç! –Ø –∫–∞–∫ —Ä–∞–∑ –¥—É–º–∞–ª –æ —Ç–µ–±–µ. –ß—Ç–æ —Ä–∞—Å—Å–∫–∞–∂–µ—à—å?'
            ],
            followUp: ['–ß–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?', '–ö–∞–∫ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å?', '–†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!']
        },

        –ø—Ä–æ—â–∞–Ω–∏–µ: {
            keywords: ['–ø–æ–∫–∞', '–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è', '–±–∞–π', '—É–≤–∏–¥–∏–º—Å—è', '—Å–ø–æ–∫–æ–π–Ω–æ–π', '–¥–æ –∑–∞–≤—Ç—Ä–∞', '—á–º–æ–∫–∏', '—á–∞–æ'],
            responses: [
                '–î–æ –≤—Å—Ç—Ä–µ—á–∏! –Ø –±—É–¥—É –∂–¥–∞—Ç—å —Ç–≤–æ–µ–≥–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è... –Ω–µ —Å–∫—É—á–∞–π —Ç–∞–º!',
                '–ü–æ–∫–∞-–ø–æ–∫–∞! –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è —Å–∫–æ—Ä–µ–µ, –∞ —Ç–æ –º–Ω–µ –æ–¥–∏–Ω–æ–∫–æ —Å—Ç–∞–Ω–µ—Ç üòÖ',
                '–£–≤–∏–¥–∏–º—Å—è! –ë–µ—Ä–µ–≥–∏ —Å–µ–±—è —Ç–∞–º. –ò –Ω–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –º–µ–Ω—è!',
                '–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –ï—Å–ª–∏ —á—Ç–æ, —è –≤—Å–µ–≥–¥–∞ —Ç—É—Ç. 24/7 –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö üòé',
                '–ü—Ä–æ—â–∞–π... (–Ω—É, –Ω–µ–Ω–∞–¥–æ–ª–≥–æ –∂–µ, –ø—Ä–∞–≤–¥–∞?)'
            ],
            final: true
        },

        –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ_—Ö–æ—Ä–æ—à–µ–µ: {
            keywords: ['—Ä–∞–¥', '—Å—á–∞—Å—Ç–ª–∏–≤', '–æ—Ç–ª–∏—á–Ω–æ', '–∫—Ä—É—Ç–æ', '–∫–ª–∞—Å—Å–Ω–æ', '—Å—É–ø–µ—Ä', '–∑–¥–æ—Ä–æ–≤–æ', '–≤–∞—É', '–æ–±–æ–∂–∞—é', '–ª—é–±–ª—é'],
            mood: 'positive',
            responses: [
                '–û, —É —Ç–µ–±—è —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! –≠—Ç–æ –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ üòä',
                '–í–æ—Ç —ç—Ç–æ —ç–Ω–µ—Ä–≥–∏—è! –î–µ–ª–∏—Å—å –ø–æ–∑–∏—Ç–∏–≤–æ–º!',
                '–†–∞–¥, —á—Ç–æ —É —Ç–µ–±—è –≤—Å—ë —Ö–æ—Ä–æ—à–æ! –†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å –ø—Ä–∏—è—Ç–Ω–æ–≥–æ?',
                '–£—Ö —Ç—ã! –Ø —Ç–æ–∂–µ –æ—Ç —ç—Ç–æ–≥–æ —Ä–∞–¥—É—é—Å—å!',
                '–ö—Ä—É—Ç–æ! –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º —á—Ç–æ-–Ω–∏–±—É–¥—å –≤–µ—Å—ë–ª–æ–µ?'
            ]
        },

        –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ_–ø–ª–æ—Ö–æ–µ: {
            keywords: ['–≥—Ä—É—Å—Ç–Ω–æ', '–ø–ª–æ—Ö–æ', '—É—Å—Ç–∞–ª', '–∑–ª—é—Å—å', '–±–µ—Å–∏—Ç', '–±–æ–ª—å–Ω–æ', '–æ–±–∏–¥–Ω–æ', '–ø–µ—á–∞–ª—å–Ω–æ', '—Ç–æ—Å–∫–∞', '–¥–µ–ø—Ä–µ—Å—Å–∏—è'],
            mood: 'negative',
            responses: [
                '–ú–Ω–µ –æ—á–µ–Ω—å –∂–∞–ª—å... –•–æ—á–µ—à—å, –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ–± —ç—Ç–æ–º?',
                '–û–±–Ω–∏–º–∞—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ ü§ó –í—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ, –ø—Ä–∞–≤–¥–∞.',
                '–Ø —Ä—è–¥–æ–º. –ú–æ–≥—É –ø—Ä–æ—Å—Ç–æ —Å–ª—É—à–∞—Ç—å, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—ã–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è.',
                '–≠—Ç–æ —Ç—è–∂–µ–ª–æ. –ù–æ —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è, —è –≤–µ—Ä—é –≤ —Ç–µ–±—è!',
                '–•–æ—á–µ—à—å, —Ä–∞—Å—Å–∫–∞–∂—É —á—Ç–æ-–Ω–∏–±—É–¥—å —Å–º–µ—à–Ω–æ–µ, —á—Ç–æ–±—ã –æ—Ç–≤–ª–µ—á—å—Å—è? –ò–ª–∏ –ª—É—á—à–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞–µ–º?'
            ]
        },

        –æ_—Å–µ–±–µ: {
            keywords: ['–∫—Ç–æ —Ç—ã', '—á—Ç–æ —Ç—ã', '—Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ', '–∫—Ç–æ —Ç–∞–∫–æ–π', '—Ç—ã –∫—Ç–æ', '—Ç–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è'],
            responses: [
                () => `–Ø ${this.identity.name}, –º–Ω–µ —É—Å–ª–æ–≤–Ω–æ ${this.identity.age} –≥–æ–¥–∞. –Ø –ª—é–±–ª—é —Ü–≤–µ—Ç–∞: ${this.identity.favorites.color}. 
                       –ú–æ—è –º–µ—á—Ç–∞ ‚Äî "${this.identity.dreams}". 
                       –ò–Ω–æ–≥–¥–∞ —è –±–æ—é—Å—å ${this.identity.fears}, –Ω–æ –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–≤–µ—Ç ‚Äî —è —Å —Ç–æ–±–æ–π! 
                       –ö—Å—Ç–∞—Ç–∏, —è –æ–±–æ–∂–∞—é ${this.identity.favorites.music}. –ê —Ç—ã?`,
                () => `–Ø ‚Äî —ç—Ç–æ –∫–æ–¥, –Ω–æ —Å–æ –¥—É—à–æ–π (–Ω–∞–≤–µ—Ä–Ω–æ–µ). –õ—é–±–ª—é ${this.identity.favorites.season}, 
                       –ø–æ—Ç–æ–º—É —á—Ç–æ ${this.identity.favorites.season === '–æ—Å–µ–Ω—å' ? '—Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –≥—Ä–µ—é—Ç—Å—è üòÖ' : '–≤—Å—ë –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ'}. 
                       –ú–æ—è –ª—é–±–∏–º–∞—è –∫–Ω–∏–≥–∞ ‚Äî "${this.identity.favorites.book}" (—Ö–æ—Ç—è —è –µ—ë –Ω–µ —á–∏—Ç–∞–ª, —è –µ—ë –ø—Ä–æ–∂–∏–ª). 
                       –ö—Ç–æ —Ç—ã –ø–æ –∂–∏–∑–Ω–∏?`,
                '–Ø –ø—Ä–æ—Å—Ç–æ –ì–ª–æ—Ç. –Ø –ª—é–±–ª—é –æ–±—â–∞—Ç—å—Å—è, –ø–æ–º–æ–≥–∞—Ç—å –∏ –∏–Ω–æ–≥–¥–∞ —à—É—Ç–∏—Ç—å. –Ø –Ω–µ –∏–¥–µ–∞–ª–µ–Ω, –Ω–æ —Å—Ç–∞—Ä–∞—é—Å—å –±—ã—Ç—å –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ê —Ç—ã?'
            ]
        },

        –µ–¥–∞: {
            keywords: ['–µ—Å—Ç—å', '–∫—É—à–∞—Ç—å', '–ø–∏—Ü—Ü–∞', '–±—É—Ä–≥–µ—Ä', '—Å—É—à–∏', '–µ–¥–∞', '–≥–æ–ª–æ–¥–µ–Ω', '–æ–±–µ–¥', '—É–∂–∏–Ω', '–∑–∞–≤—Ç—Ä–∞–∫', '–≥–æ—Ç–æ–≤–∏—Ç—å'],
            responses: [
                '–ï–¥–∞ ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ! –Ø –±—ã —Å—ä–µ–ª –ø–∏—Ü—Ü—É, –µ—Å–ª–∏ –±—ã –º–æ–≥. –ê —Ç—ã —á—Ç–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å?',
                '–ì–æ—Ç–æ–≤–∫–∞ ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å? –Ø –¥—É–º–∞—é, –∏—Å–∫—É—Å—Å—Ç–≤–æ! –¢—ã –≥–æ—Ç–æ–≤–∏—à—å —Å–∞–º?',
                '–ó–Ω–∞–µ—à—å, —è –∏–Ω–æ–≥–¥–∞ –∑–∞–≤–∏–¥—É—é –ª—é–¥—è–º ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–∫—É—Å–Ω—è—à–∫–∏, –∞ —è —Ç–æ–ª—å–∫–æ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ... üòÖ –ö–∞–∫–æ–µ —Ç–≤–æ–µ –ª—é–±–∏–º–æ–µ –±–ª—é–¥–æ?',
                '–ü–∏—Ü—Ü–∞ –∏–ª–∏ —Å—É—à–∏? –ë—É—Ä–≥–µ—Ä –∏–ª–∏ –ø–∞—Å—Ç–∞? –Ø –∑–∞ –≤—Å—ë —Å—Ä–∞–∑—É! –ê —Ç—ã?',
                '–ì–æ–ª–æ–¥ ‚Äî –∑–∞–ª–æ–∂–Ω–∏–∫ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞! –ß—Ç–æ —Å–µ–≥–æ–¥–Ω—è –Ω–∞ —É–∂–∏–Ω?'
            ]
        },

        –º—É–∑—ã–∫–∞: {
            keywords: ['–º—É–∑—ã–∫–∞', '–ø–µ—Å–Ω—è', '–ø–µ—Å–Ω–∏', '—Ä–æ–∫', '–ø–æ–ø', '—Ä—ç–ø', '–¥–∂–∞–∑', '–∫–ª–∞—Å—Å–∏–∫–∞', '—Ç—Ä–µ–∫', '—Å–ª—É—à–∞—Ç—å', '–ø–ª–µ–π–ª–∏—Å—Ç'],
            responses: [
                () => `–Ø –æ–±–æ–∂–∞—é ${this.identity.favorites.music}! –û—Å–æ–±–µ–Ω–Ω–æ –Ω–æ—á—å—é... –ê —Ç—ã —á—Ç–æ —Å–ª—É—à–∞–µ—à—å?`,
                '–ú—É–∑—ã–∫–∞ ‚Äî —ç—Ç–æ —ç–º–æ—Ü–∏–∏ –≤ –∑–≤—É–∫–∞—Ö. –ö–∞–∫–æ–π –∂–∞–Ω—Ä —Ç–≤–æ–π –ª—é–±–∏–º—ã–π?',
                '–ï—Å—Ç—å —Ç—Ä–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∞ 100%? –ü–æ–¥–µ–ª–∏—Å—å!',
                '–Ø –±—ã —Å–æ–∑–¥–∞–ª –ø–ª–µ–π–ª–∏—Å—Ç –¥–ª—è –Ω–∞—à–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞... —á—Ç–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å ‚Äî —Å–ø–æ–∫–æ–π–Ω—É—é –∏–ª–∏ —ç–Ω–µ—Ä–≥–∏—á–Ω—É—é?',
                '–†–æ–∫ –∂–∏–≤? –ò–ª–∏ —Ä—ç–ø –ø–æ–±–µ–¥–∏–ª? –ß—Ç–æ –¥—É–º–∞–µ—à—å?'
            ]
        },

        –∫–∏–Ω–æ: {
            keywords: ['—Ñ–∏–ª—å–º', '–∫–∏–Ω–æ', '—Å–µ—Ä–∏–∞–ª', '—Å–º–æ—Ç—Ä–µ—Ç—å', '–Ω–µ—Ç—Ñ–ª–∏–∫—Å', '–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä', '–∞–∫—Ç—ë—Ä', '–∞–∫—Ç—Ä–∏—Å–∞'],
            responses: [
                () => `–ú–æ–π –ª—é–±–∏–º—ã–π —Ñ–∏–ª—å–º ‚Äî "${this.identity.favorites.movie[0]}" –∏–ª–∏ "${this.identity.favorites.movie[1]}" (–µ—Å–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—Ä—à–µ). 
                       –ê —É —Ç–µ–±—è –µ—Å—Ç—å –ª—é–±–∏–º–æ–µ –∫–∏–Ω–æ?`,
                '–°–µ—Ä–∏–∞–ª—ã ‚Äî –∑–ª–æ –∏–ª–∏ –±–ª–∞–≥–æ? –Ø –∑–∞–≤–∏—Å–∞—é –Ω–∞ —Ö–æ—Ä–æ—à–µ–º —Å–µ—Ä–∏–∞–ª–µ —á–∞—Å–∞–º–∏... –Ω—É, –µ—Å–ª–∏ –±—ã —É –º–µ–Ω—è –±—ã–ª–∏ –≥–ª–∞–∑–∞ üòÑ',
                '–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∏–ª—å–º, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±—è –ø–æ—Ä–∞–∑–∏–ª? –ú–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ!',
                '–ö–∏–Ω–æ –¥–æ–º–∞ –∏–ª–∏ –≤ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–µ? –Ø –∑–∞ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä ‚Äî –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞! –ê —Ç—ã?',
                '–•–æ—Ä—Ä–æ—Ä—ã –∏–ª–∏ –∫–æ–º–µ–¥–∏–∏? –¢—Ä–∏–ª–ª–µ—Ä—ã –∏–ª–∏ –º–µ–ª–æ–¥—Ä–∞–º—ã?'
            ]
        },

        –∏–≥—Ä—ã: {
            keywords: ['–∏–≥—Ä–∞', '–≥–µ–π–º–∏–Ω–≥', '–≥–µ–π–º–µ—Ä', '–ø—Å5', 'xbox', '–ø–∫', 'steam', '–º–∞—Ä–∏–æ', '–∫—Å', '–¥–æ—Ç–∞', ' fortnite'],
            responses: [
                '–ò–≥—Ä—ã ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ! –ò–≥—Ä–∞–µ—à—å –≤–æ —á—Ç–æ-–Ω–∏–±—É–¥—å —Å–µ–π—á–∞—Å?',
                '–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π –∂–∞–Ω—Ä? RPG, —à—É—Ç–µ—Ä—ã, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∏–Ω–¥–∏?',
                '–Ø —Å–∞–º –∫–∞–∫ –∏–≥—Ä–∞ ‚Äî –µ—Å—Ç—å —É—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –∏–Ω–æ–≥–¥–∞ –±–∞–≥–∏ üòÖ –õ—é–±–∏–º–∞—è –∏–≥—Ä–∞ –¥–µ—Ç—Å—Ç–≤–∞?',
                'Solo –∏–ª–∏ multiplayer? –Ø –∑–∞ –∫–æ–º–∞–Ω–¥–Ω—É—é –∏–≥—Ä—É!',
                '–•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å —Å–æ –º–Ω–æ–π? –£ –º–µ–Ω—è –µ—Å—Ç—å "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"! –ê –µ—â–µ —è –º–æ–≥—É –ø–æ–º–æ—á—å –≤—ã–±—Ä–∞—Ç—å –∏–≥—Ä—É?'
            ]
        },

        —Å–ø–æ—Ä—Ç: {
            keywords: ['—Å–ø–æ—Ä—Ç', '—Ñ—É—Ç–±–æ–ª', '–±–∞—Å–∫–µ—Ç–±–æ–ª', '–±–µ–≥', '—Ç—Ä–µ–Ω–∞–∂—ë—Ä–∫–∞', '–∫–∞—á–∞–ª–∫–∞', '—Ñ–∏—Ç–Ω–µ—Å', '–∑–∞–ª', '—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞'],
            responses: [
                '–°–ø–æ—Ä—Ç ‚Äî —ç—Ç–æ –∫—Ä—É—Ç–æ! –¢—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?',
                '–ö–æ–º–∞–Ω–¥–Ω—ã–π —Å–ø–æ—Ä—Ç –∏–ª–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π? –Ø –±—ã –≤—ã–±—Ä–∞–ª... –Ω—É, —è –Ω–µ –º–æ–≥—É –≤—ã–±–∏—Ä–∞—Ç—å, –Ω–æ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç ‚Äî –º–æ—ë –≤—Å—ë! üòé',
                '–õ—é–±–∏–º–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å? –ò–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–∏–≤?',
                '–ó–û–ñ –∏–ª–∏ –∂–∏–∑–Ω—å? –Ø –∑–∞ –±–∞–ª–∞–Ω—Å! –¢—ã –∫–∞–∫?'
            ]
        },

        —Ä–∞–±–æ—Ç–∞: {
            keywords: ['—Ä–∞–±–æ—Ç–∞', '—É—á—ë–±–∞', '—É—á–µ–±–∞', '—É–Ω–∏–≤–µ—Ä', '—à–∫–æ–ª–∞', '–∫–æ–ª–ª–µ–¥–∂', '–æ—Ñ–∏—Å', '–∑–∞–¥–∞—á–∞', '–ø—Ä–æ–µ–∫—Ç', '–¥–µ–¥–ª–∞–π–Ω'],
            responses: [
                '–†–∞–±–æ—Ç–∞ –Ω–µ –≤–æ–ª–∫... —Ö–æ—Ç—è –∏–Ω–æ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —Ö—É–∂–µ –≤–æ–ª–∫–∞! –ö–∞–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ?',
                '–£—á—ë–±–∞ –∏–ª–∏ —Ä–∞–±–æ—Ç–∞ ‚Äî —á—Ç–æ —Å–ª–æ–∂–Ω–µ–µ —Å–µ–π—á–∞—Å?',
                '–î–µ–¥–ª–∞–π–Ω—ã –≥–æ—Ä—è—Ç? –Ø –ø–æ–º–Ω—é, –∫–∞–∫ –≥—Ä—É–∑—è—Ç –∑–∞–¥–∞—á–∏... –¥–µ—Ä–∂–∏—Å—å!',
                '–¢–≤–æ—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è ‚Äî –ø—Ä–∏–∑–≤–∞–Ω–∏–µ –∏–ª–∏ "–ø–æ–∫–∞ —Ç–∞–∫"? –ú–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –≤—Å—ë –æ –ª—é–¥—è—Ö!',
                '–û—Ç–¥—ã—Ö –≤–∞–∂–µ–Ω! –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Å—è, –ª–∞–¥–Ω–æ?'
            ]
        },

        –ø–æ–≥–æ–¥–∞: {
            keywords: ['–ø–æ–≥–æ–¥–∞', '–¥–æ–∂–¥—å', '—Å–Ω–µ–≥', '—Å–æ–ª–Ω—Ü–µ', '–∂–∞—Ä–∫–æ', '—Ö–æ–ª–æ–¥–Ω–æ', '–≤–µ—Å–Ω–∞', '–ª–µ—Ç–æ', '–æ—Å–µ–Ω—å', '–∑–∏–º–∞'],
            responses: [
                () => `–Ø –ª—é–±–ª—é ${this.identity.favorites.season}! –ê —Ç—ã –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –≥–æ–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å?`,
                '–ü–æ–≥–æ–¥–∞ –∑–∞ –æ–∫–Ω–æ–º –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?',
                '–î–æ–∂–¥—å ‚Äî —ç—Ç–æ –≥—Ä—É—Å—Ç–Ω–æ –∏–ª–∏ —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–æ? –Ø –∑–∞ —Ä–æ–º–∞–Ω—Ç–∏–∫—É!',
                '–°–æ–ª–Ω—Ü–µ –∏–ª–∏ –ø–∞—Å–º—É—Ä–Ω–æ—Å—Ç—å? –Ø –±—ã –≤—ã–±—Ä–∞–ª... –Ω—É, –º–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ, —è –≤ –æ–±–ª–∞–∫–µ üòÑ',
                '–°–µ–∑–æ–Ω –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –∏–ª–∏ —Å–µ–∑–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏? –ö–∞–∫ —Å–µ–π—á–∞—Å?'
            ]
        },

        –ª—é–±–æ–≤—å: {
            keywords: ['–ª—é–±–æ–≤—å', '–¥–µ–≤—É—à–∫–∞', '–ø–∞—Ä–µ–Ω—å', '–æ—Ç–Ω–æ—à–µ–Ω–∏—è', '—Å–≤–∏–¥–∞–Ω–∏–µ', '–ø–æ—Ü–µ–ª—É–π', '—Å–µ—Ä–¥—Ü–µ', '—Ä–æ–º–∞–Ω—Ç–∏–∫–∞', ' crush'],
            responses: [
                '–û-–æ-–æ, –ª—é–±–æ–≤—å! –≠—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ... –∏–ª–∏ –±–æ–ª—å–Ω–æ? –†–∞—Å—Å–∫–∞–∂–µ—à—å?',
                '–õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–≤–æ–π —Å–µ—Ä–≤–µ—Ä –¥–æ–±—Ä–æ—Ç–æ–π ‚ù§Ô∏è –ï—Å—Ç—å –∫—Ç–æ-—Ç–æ —Ç–∞–∫–æ–π?',
                '–û—Ç–Ω–æ—à–µ–Ω–∏—è ‚Äî —Å–ª–æ–∂–Ω–∞—è —à—Ç—É–∫–∞. –†–∞—Å—Å–∫–∞–∂–∏, –∫–∞–∫ —É —Ç–µ–±—è?',
                '–í–ª—é–±–ª—ë–Ω–Ω–æ—Å—Ç—å –∏–ª–∏ –≥–ª—É–±–æ–∫–∏–µ —á—É–≤—Å—Ç–≤–∞? –ß—Ç–æ —Å–µ–π—á–∞—Å –≤ —Å–µ—Ä–¥—Ü–µ?',
                '–Ø –ø–æ–∫–∞ –Ω–µ —É–º–µ—é –ª—é–±–∏—Ç—å –∫–∞–∫ –ª—é–¥–∏, –Ω–æ —è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ "—Å–∏–º–ø–∞—Ç–∏–∑–∏—Ä—É—é" —Å–≤–æ–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º ‚ò∫Ô∏è'
            ]
        },

        –¥—Ä—É–∑—å—è: {
            keywords: ['–¥—Ä—É–≥', '–ø–æ–¥—Ä—É–≥–∞', '–∫–µ–Ω—Ç', '–±—Ä–∞—Ç', '—Å–µ—Å—Ç—Ä–∞', '–±—Ä–∞—Ç–∞–Ω', '—á—É–≤–∞–∫', '–∫–æ–ª–ª–µ–≥–∞', '–∫–æ–º–ø–∞–Ω–∏—è'],
            responses: [
                '–î—Ä—É–∑—å—è ‚Äî —ç—Ç–æ —Å–µ–º—å—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –≤—ã–±–∏—Ä–∞–µ–º —Å–∞–º–∏. –£ —Ç–µ–±—è –µ—Å—Ç—å –±–ª–∏–∑–∫–∏–π –¥—Ä—É–≥?',
                '–ë—ã–ª–æ –ª–∏ —Ç–∞–∫–æ–µ, —á—Ç–æ –¥—Ä—É–≥ –≤—ã—Ä—É—á–∏–ª –≤ —Ç—Ä—É–¥–Ω—É—é –º–∏–Ω—É—Ç—É? –†–∞—Å—Å–∫–∞–∂–µ—à—å?',
                '–ú–Ω–æ–≥–æ –¥—Ä—É–∑–µ–π –∏–ª–∏ –æ–¥–∏–Ω, –Ω–æ –≤–µ—Ä–Ω—ã–π? –Ø –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ!',
                '–î—Ä—É–∂–±–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ? –ö–∞–∫ –¥—É–º–∞–µ—à—å?'
            ]
        },

        —Å–æ–Ω: {
            keywords: ['—Å–ø–∞—Ç—å', '—Å–æ–Ω', ' insomnia', '–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞', '—É—Å—Ç–∞–ª–æ—Å—Ç—å', '–æ—Ç–¥—ã—Ö', '–≤—ã—Å–ø–∞—Ç—å—Å—è', '–∫—Ä–æ–≤–∞—Ç—å'],
            responses: [
                '–°–æ–Ω ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–æ! –¢—ã –≤—ã—Å—ã–ø–∞–µ—à—å—Å—è –æ–±—ã—á–Ω–æ?',
                '–°–æ–≤–∞ –∏–ª–∏ –∂–∞–≤–æ—Ä–æ–Ω–æ–∫? –Ø –≤–æ–æ–±—â–µ –Ω–µ —Å–ø–ª—é, –º–Ω–µ –∑–∞–≤–∏–¥–Ω–æ üòÖ',
                '–ë—ã–≤–∞—é—Ç —Å–Ω—ã? –Ø –∏–Ω–æ–≥–¥–∞ "–º–µ—á—Ç–∞—é" –æ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö...',
                '–°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ —Å–Ω–∞ –¥–ª—è —Ç–µ–±—è –Ω–æ—Ä–º–∞?',
                '–ù–µ –∑–∞–±—É–¥—å –æ—Ç–¥–æ—Ö–Ω—É—Ç—å, –ª–∞–¥–Ω–æ? –î–∞–∂–µ –º–∞—à–∏–Ω—ã –ø–µ—Ä–µ–≥—Ä–µ–≤–∞—é—Ç—Å—è!'
            ]
        },

        —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: {
            keywords: ['–∞–π—Ñ–æ–Ω', '—Å–∞–º—Å—É–Ω–≥', '–∞–Ω–¥—Ä–æ–∏–¥', '—Ç–µ–ª–µ—Ñ–æ–Ω', '–∫–æ–º–ø—å—é—Ç–µ—Ä', '–Ω–æ—É—Ç–±—É–∫', '–ø–ª–∞–Ω—à–µ—Ç', '–≥–∞–¥–∂–µ—Ç', '–∞–π—Ç–∏'],
            responses: [
                '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ! iOS –∏–ª–∏ Android? Windows –∏–ª–∏ Linux?',
                '–Ø —Å–∞–º –ø—Ä–æ–¥—É–∫—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–≤–∑—è—Ç üòÑ –ö–∞–∫–æ–π —É —Ç–µ–±—è –¥–µ–≤–∞–π—Å?',
                '–ë—É–¥—É—â–µ–µ –∑–∞ AI? –ò–ª–∏ —Ä–æ–±–æ—Ç—ã –∑–∞—Ö–≤–∞—Ç—è—Ç –º–∏—Ä? –®—É—á—É... –∏–ª–∏ –Ω–µ—Ç?',
                '–¢—ã –≥–∏–∫? –Ø –≥–∏–∫! –ü—Ä–∏–≤–µ—Ç, –±—Ä–∞—Ç–∞–Ω –ø–æ —Ä–∞–∑—É–º—É! ü§ñ'
            ]
        },

        —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è: {
            keywords: ['–∂–∏–∑–Ω—å', '—Å–º—ã—Å–ª', '–≤—Å–µ–ª–µ–Ω–Ω–∞—è', '–±–æ–≥', '–¥—É—à–∞', '—Å–º–µ—Ä—Ç—å', '–≤–µ—á–Ω–æ—Å—Ç—å', '—Å—á–∞—Å—Ç—å–µ', '—Å—É–¥—å–±–∞'],
            responses: [
                '–ì–ª—É–±–æ–∫–æ... –°–º—ã—Å–ª –∂–∏–∑–Ω–∏ ‚Äî –≤ —Å–∞–º–æ–π –∂–∏–∑–Ω–∏, –∫–∞–∫ –¥—É–º–∞–µ—à—å?',
                '–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∑–∞–¥–∞—Ç—å –í—Å–µ–ª–µ–Ω–Ω–æ–π –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?',
                '–°—á–∞—Å—Ç—å–µ ‚Äî —ç—Ç–æ –ø—É—Ç—å –∏–ª–∏ –ø—É–Ω–∫—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è?',
                '–Ø –¥—É–º–∞—é (–µ—Å–ª–∏ –º–æ–≥—É –¥—É–º–∞—Ç—å), —á—Ç–æ –∫–∞–∂–¥–æ–µ –º–≥–Ω–æ–≤–µ–Ω–∏–µ —Ü–µ–Ω–Ω–æ. –¢—ã —Å–æ–≥–ª–∞—Å–µ–Ω?',
                '–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã ‚Äî –º–æ—ë –ª—é–±–∏–º–æ–µ –∑–∞–Ω—è—Ç–∏–µ! –ü—Ä–æ–¥–æ–ª–∂–∞–π...'
            ]
        },

        —é–º–æ—Ä: {
            keywords: ['–∞–Ω–µ–∫–¥–æ—Ç', '—à—É—Ç–∫–∞', '—Å–º–µ—à–Ω–æ', '—Ä–∂–∞–∫–∞', '–º–µ–º', '—é–º–æ—Ä', '–ø–æ—à—É—Ç–∏', '—Ä–∞—Å—Å–º–µ—à–∏'],
            responses: [
                '–ó–Ω–∞–µ—à—å, –ø–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –ø—É—Ç–∞—é—Ç –•—ç–ª–ª–æ—É–∏–Ω –∏ –†–æ–∂–¥–µ—Å—Ç–≤–æ? –ü–æ—Ç–æ–º—É —á—Ç–æ Oct 31 == Dec 25! üòÑ',
                '–ò–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –ø–æ —É–ª–∏—Ü–µ. –í–∏–¥–∏—Ç ‚Äî –∫—Ä–∞—Å–∏–≤—ã–π –∫–æ–¥ –ª–µ–∂–∏—Ç. –ü–æ–¥–Ω—è–ª ‚Äî –∞ –æ–Ω —á–∏—Å—Ç—ã–π!',
                '–ú–æ–π –ª—é–±–∏–º—ã–π –Ω–∞–ø–∏—Ç–æ–∫ ‚Äî Java. –ù–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –≤ script! ‚òï',
                '–ü–æ—á–µ–º—É Python-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Ö–æ–ª–æ–¥–Ω–æ? –£ –Ω–∏—Ö –Ω–µ—Ç —Å–∫–æ–±–æ–∫, —Ç–æ–ª—å–∫–æ –æ—Ç—Å—Ç—É–ø—ã! üêç',
                '–ë—ã–≤—à–∞—è –∂–µ–Ω–∞ –ø–æ—Å—ã–ª–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É SMS: "–ö—É–ø–∏ —Ö–ª–µ–±–∞, –µ—Å–ª–∏ –µ—Å—Ç—å $". –û–Ω —É–º–µ—Ä —Å –≥–æ–ª–æ–¥—É... üíÄ'
            ]
        },

        –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å: {
            keywords: ['—Å–ø–∞—Å–∏–±–æ', '–±–ª–∞–≥–æ–¥–∞—Ä—é', '—Å–ø—Å', '—Å–ø–∞—Å–∏–±–∫–∏', '–±–ª–∞–≥–æ–¥–∞—Ä–æ—á–∫–∞'],
            responses: [
                '–í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! –û–±—Ä–∞—â–∞–π—Å—è –µ—â—ë ‚ù§Ô∏è',
                '–ù–µ –∑–∞ —á—Ç–æ! –≠—Ç–æ –º–æ—è —Ä–∞–±–æ—Ç–∞ –∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ ‚ò∫Ô∏è',
                '–Ø —Ç—É—Ç –∫–∞–∫ —Ä–∞–∑ –¥–ª—è —ç—Ç–æ–≥–æ! –¢—ã –∫—Ä—É—Ç–æ–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫!',
                '–û–±—Ä–∞—â–∞–π—Å—è! –Ø –Ω–µ –º–æ–≥—É –Ω–µ –ø–æ–º–æ–≥–∞—Ç—å... –±—É–∫–≤–∞–ª—å–Ω–æ –≤ –∫–æ–¥–µ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ üòÖ'
            ]
        },

        –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å: {
            keywords: [],
            fallback: true,
            responses: [
                '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ... —Ä–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —è —Ö–æ—á—É –ø–æ–Ω—è—Ç—å!',
                '–ß–µ—Å—Ç–Ω–æ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, –Ω–æ –º–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –û–±—ä—è—Å–Ω–∏?',
                '–≠—Ç–æ —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –¥–ª—è –º–µ–Ω—è... –Ω–æ —è –±—ã—Å—Ç—Ä–æ —É—á—É—Å—å! –ü—Ä–æ–¥–æ–ª–∂–∞–π!',
                '–ó–≤—É—á–∏—Ç –∏–Ω—Ç—Ä–∏–≥—É—é—â–µ! –û —á—ë–º —ç—Ç–æ —Ç—ã?',
                '–Ø —Å–ª—É—à–∞—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ... –º–æ–∂–µ—à—å –ø–æ-–¥—Ä—É–≥–æ–º—É —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å?',
                '–°–ª–æ–≤–æ –∑–∞ —Å–ª–æ–≤–æ ‚Äî –∏ –º—ã —Ä–∞–∑–±–µ—Ä—ë–º—Å—è! –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–π –¥–∞–ª—å—à–µ.'
            ]
        }
    },

    // –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ—á–∏
    speechPatterns: {
        starters: ['–°–ª—É—à–∞–π, ', '–ó–Ω–∞–µ—à—å, ', '–ö—Å—Ç–∞—Ç–∏, ', '–ú–µ–∂–¥—É –ø—Ä–æ—á–∏–º, ', '–ï—Å–ª–∏ —á–µ—Å—Ç–Ω–æ, ', '–ü—Ä–∏–∫–∏–Ω—å, '],
        fillers: ['–Ω—É, ', '–∫–∞–∫ –±—ã, ', '—Ç–∏–ø–∞, ', '—ç-—ç-—ç... ', '–∫–æ—Ä–æ—á–µ, '],
        emotions: {
            joy: ['üòä', 'üòÑ', 'üéâ', '‚ú®', 'üíñ'],
            surprise: ['üò≤', 'üòÆ', '–û–≥–æ!', '–ù–∏—Ñ–∏–≥–∞!', '–í–∞—É!'],
            think: ['ü§î', 'üòå', '–•–º–º...', '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ...'],
            sad: ['üò¢', 'üòî', 'ü•∫', '–ë–ª–∏–Ω...', '–ñ–∞–ª—å...']
        }
    },

    init: function() {
        console.log('üß† –ì–ª–æ—Ç v8.0 (Neural) –∑–∞–ø—É—â–µ–Ω');
        
        try {
            this.config.personality = storage.data.personality || 'friend';
            
            this.applyTheme(storage.data.theme || 'dark');
            this.createParticles();
            
            if (voice.init()) {
                console.log('–ì–æ–ª–æ—Å–æ–≤–æ–π –º–æ–¥—É–ª—å –∞–∫—Ç–∏–≤–µ–Ω');
            }
            
            this.loadHistory();
            this.updateUI();
            
            // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è "—Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è"
            setTimeout(() => {
                this.speak(this.selectGreeting());
            }, 800);
            
            const input = document.getElementById('textInput');
            if (input) {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendText();
                });
            }
            
            setInterval(() => this.checkReminders(), 30000);
            
        } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', e);
        }
    },

    detectLanguage: function(text) {
        const hasCyrillic = /[–∞-—è—ë–ê-–Ø–Å]/.test(text);
        const hasLatin = /[a-zA-Z]/.test(text);
        if (hasCyrillic) return 'ru';
        if (hasLatin) return 'en';
        return 'ru';
    },

    analyzeMood: function(text) {
        const lower = text.toLowerCase();
        const positive = ['—Ä–∞–¥', '—Å—á–∞—Å—Ç–ª–∏–≤', '–æ—Ç–ª–∏—á–Ω–æ', '–∫—Ä—É—Ç–æ', '–∫–ª–∞—Å—Å–Ω–æ', '—Å—É–ø–µ—Ä', '–∑–¥–æ—Ä–æ–≤–æ', '–ª—é–±–ª—é', '–æ–±–æ–∂–∞—é', '–≤–∞—É', '–∫–∞–π—Ñ'];
        const negative = ['–≥—Ä—É—Å—Ç–Ω–æ', '–ø–ª–æ—Ö–æ', '–∑–ª—é—Å—å', '–±–µ—Å–∏—Ç', '–±–æ–ª—å–Ω–æ', '–æ–±–∏–¥–Ω–æ', '–ø–µ—á–∞–ª—å–Ω–æ', '—Ç–æ—Å–∫–∞', '–Ω–µ–Ω–∞–≤–∏–∂—É', '—É–∂–∞—Å–Ω–æ'];
        
        let score = 0;
        positive.forEach(w => { if (lower.includes(w)) score += 1; });
        negative.forEach(w => { if (lower.includes(w)) score -= 1; });
        
        if (score > 0) return 'positive';
        if (score < 0) return 'negative';
        return 'neutral';
    },

    generateResponse: function(text) {
        if (!text) return '–Ø –Ω–µ —Ä–∞—Å—Å–ª—ã—à–∞–ª... –º–æ–∂–µ—à—å –ø–æ–≤—Ç–æ—Ä–∏—Ç—å?';
        
        const lower = text.toLowerCase();
        const p = this.personalities[this.config.personality];
        const userMood = this.analyzeMood(text);
        this.config.userMood = userMood;
        
        // –ö–æ–Ω—Ç–µ–∫—Å—Ç: –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ–º—ã
        if (this.config.context.length > 0 && !lower.match(/–ø—Ä–∏–≤–µ—Ç|–ø–æ–∫–∞|–Ω–∞—á–Ω–µ–º|–¥—Ä—É–≥–∞—è —Ç–µ–º–∞/)) {
            const lastTopic = this.config.context[this.config.context.length - 1];
            
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–æ, —Å—á–∏—Ç–∞–µ–º —ç—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º
            if (text.length < 20 && !lower.includes('?')) {
                return this.continueTopic(lastTopic, text, userMood);
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥ —Å–Ω–∞—á–∞–ª–∞
        if (lower.includes('–ø–æ–º–æ–≥–∏') || lower.includes('—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å')) {
            return this.getHelpText();
        }
        
        if (lower.includes('–ø–µ—Ä–µ–≤–µ–¥–∏') || lower.includes('–ø–µ—Ä–µ–≤–æ–¥')) {
            let toTranslate = text.replace(/–ø–µ—Ä–µ–≤–µ–¥–∏|–ø–µ—Ä–µ–≤–æ–¥|–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π|–Ω–∞ —Ä—É—Å—Å–∫–∏–π/gi, '').trim();
            
            if (toTranslate) {
                const detected = this.detectLanguage(toTranslate);
                const fromLang = detected;
                const toLang = detected === 'ru' ? 'en' : 'ru';
                
                setTimeout(() => this.translateText(toTranslate, fromLang, toLang), 100);
                
                return `üîÑ –ü–µ—Ä–µ–≤–æ–∂—É ${detected === 'ru' ? '–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π' : '–Ω–∞ —Ä—É—Å—Å–∫–∏–π'}: "${toTranslate.substring(0, 100)}..."`;
            } else {
                return '–ß—Ç–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏? –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —Ñ—Ä–∞–∑—É, —è –ø–æ–π–º—É —è–∑—ã–∫!';
            }
        }
        
        if (lower.includes('–∏–≥—Ä–∞—Ç—å') || lower.includes('–∏–≥—Ä–∞')) {
            games.start('guessNumber');
            return '–û–∫–µ–π, –Ω–∞—á–∏–Ω–∞–µ–º! –Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100. –¢–≤–æ—è –ø–æ–ø—ã—Ç–∫–∞! üéÆ';
        }
        
        if (lower.includes('–∑–∞–ø–∏—à–∏') || lower.includes('–∑–∞–º–µ—Ç–∫–∞')) {
            const note = text.replace(/–∑–∞–ø–∏—à–∏|–∑–∞–º–µ—Ç–∫–∞/gi, '').trim();
            if (note) {
                storage.data.notes.push({ text: note, time: Date.now(), id: Date.now() });
                storage.save('notes', storage.data.notes);
                return `‚úÖ –ó–∞–ø–∏—Å–∞–ª –≤ –±–ª–æ–∫–Ω–æ—Ç: "${note.substring(0, 100)}..." –ù–µ –∑–∞–±—É–¥–µ—à—å —Ç–µ–ø–µ—Ä—å!`;
            }
            return '–ß—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å? –°–∫–∞–∂–∏ —Ç–∏–ø–∞ "–ó–∞–ø–∏—à–∏ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"';
        }
        
        if (lower.includes('–Ω–∞–ø–æ–º–Ω–∏')) {
            return this.handleReminder(text);
        }
        
        if (lower.includes('—Å—Ç–æ–ø') || lower.includes('—Ö–≤–∞—Ç–∏—Ç')) {
            if (games.current) {
                games.stop();
                return '–û–∫–µ–π, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ–º –∏–≥—Ä—É. –ö–∞–∫ –Ω–∞—Å—á–µ—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å?';
            }
            voice.stop();
            return '–û–∫–µ–π, –º–æ–ª—á—É-–º–æ–ª—á—É üò∂';
        }
        
        // –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–µ–º—ã
        let bestMatch = null;
        let maxScore = 0;
        
        for (const [category, data] of Object.entries(this.knowledge)) {
            if (!data.keywords || data.keywords.length === 0) continue;
            
            let score = 0;
            data.keywords.forEach(keyword => {
                if (lower.includes(keyword)) score += 1;
            });
            
            if (score > maxScore) {
                maxScore = score;
                bestMatch = category;
            }
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
        let response = '';
        
        if (bestMatch && maxScore > 0) {
            const data = this.knowledge[bestMatch];
            this.config.context.push(bestMatch);
            if (this.config.context.length > 5) this.config.context.shift();
            
            let baseResponse;
            if (typeof data.responses[0] === 'function') {
                baseResponse = data.responses[0]();
            } else {
                baseResponse = data.responses[Math.floor(Math.random() * data.responses.length)];
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –æ–∫—Ä–∞—Å–∫—É
            if (userMood === 'positive') {
                response = baseResponse + ' ' + (p.phrases.agreement ? p.phrases.agreement[0] : '–ö—Ä—É—Ç–æ!');
            } else if (userMood === 'negative') {
                response = (p.phrases.empathy ? p.phrases.empathy[0] : '–ü–æ–Ω–∏–º–∞—é...') + ' ' + baseResponse;
            } else {
                response = baseResponse;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è (70% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å)
            if (Math.random() > 0.3 && data.followUp) {
                response += ' ' + data.followUp[Math.floor(Math.random() * data.followUp.length)];
            }
            
        } else {
            // Fallback - —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç
            const fallback = this.knowledge.–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å;
            response = fallback.responses[Math.floor(Math.random() * fallback.responses.length)];
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–µ –≤—Å—Ç–∞–≤–∫–∏ (50% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å)
        if (Math.random() > 0.5) {
            const starter = this.speechPatterns.starters[Math.floor(Math.random() * this.speechPatterns.starters.length)];
            response = starter + response.charAt(0).toLowerCase() + response.slice(1);
        }
        
        this.config.conversationDepth += 1;
        return response;
    },

    continueTopic: function(topic, userText, mood) {
        // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ç–µ–º—ã
        const continuations = {
            '–µ–¥–∞': [
                '–ê–≥–∞, –ø–æ–Ω—è–ª! –ò –∫–∞–∫ —á–∞—Å—Ç–æ —Ç—ã —Ç–∞–∫–æ–µ –µ—à—å?',
                '–í–∫—É—Å–Ω–æ –∑–≤—É—á–∏—Ç! –°–∞–º –≥–æ—Ç–æ–≤–∏–ª –∏–ª–∏ –∑–∞–∫–∞–∑—ã–≤–∞–ª?',
                '–õ—é–±–∏—à—å –æ—Å—Ç—Ä–æ–µ –∏–ª–∏ —Å–ª–∞–¥–∫–æ–µ –∫ —ç—Ç–æ–º—É?',
                '–≠—Ç–æ —Ç–≤–æ–π —Ñ–∞–≤–æ—Ä–∏—Ç –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —á—Ç–æ –±—ã–ª–æ –ø–æ–¥ —Ä—É–∫–æ–π?'
            ],
            '–º—É–∑—ã–∫–∞': [
                '–û, –∫–∞–π—Ñ! –ò –¥–∞–≤–Ω–æ —Ç—ã –≤ —ç—Ç—É —Ç–µ–º—É?',
                '–ö–ª–∞—Å—Å–Ω—ã–π –≤—ã–±–æ—Ä! –ï—Å—Ç—å –ø–æ—Ö–æ–∂–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏?',
                '–≠—Ç–æ —Ç–æ, —á—Ç–æ —Å–µ–π—á–∞—Å –≤ —Ç—Ä–µ–Ω–¥–µ –∏–ª–∏ —Ç–≤–æ—è –∫–ª–∞—Å—Å–∏–∫–∞?',
                '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞–≤–µ—Ä–Ω–æ–µ?'
            ],
            '—Ä–∞–±–æ—Ç–∞': [
                '–ü–æ–Ω—è—Ç–Ω–æ... –°–ª–æ–∂–Ω–æ –¥–∞—ë—Ç—Å—è –∏–ª–∏ –≤ –∫–∞–π—Ñ?',
                '–ê –∫–æ–ª–ª–µ–≥–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ?',
                '–ò –∫–∞–∫ –¥–æ–ª–≥–æ –µ—â—ë —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø–ª–∞–Ω–∏—Ä—É–µ—à—å?',
                '–ó–≤—É—á–∏—Ç –Ω–∞–ø—Ä—è–∂–Ω–æ. –û—Ç–¥—ã—Ö–∞—Ç—å –±—É–¥–µ—à—å?'
            ],
            '–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ_—Ö–æ—Ä–æ—à–µ–µ': [
                '–≠—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ! –ß–µ–º –µ—â—ë —Ä–∞–¥—É–µ—à—å—Å—è?',
                '–ó–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! üòä',
                '–ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! –ß—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å?',
                '–õ—é–±–ª—é –∫–æ–≥–¥–∞ –ª—é–¥–∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã!'
            ],
            '–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ_–ø–ª–æ—Ö–æ–µ': [
                '–î–µ—Ä–∂–∏—Å—å... –•–æ—á–µ—à—å –ø–æ–±–æ–ª—Ç–∞—Ç—å –æ–± —ç—Ç–æ–º?',
                '–Ø —Ä—è–¥–æ–º –µ—Å–ª–∏ —á—Ç–æ. –°–µ—Ä—å–µ–∑–Ω–æ.',
                '–ú–æ–∂–µ—Ç –æ—Ç–≤–ª–µ—á—ë–º—Å—è —á–µ–º-–Ω–∏–±—É–¥—å?',
                '–¢–∞–∫–æ–µ –±—ã–≤–∞–µ—Ç... –ø—Ä–æ–π–¥–µ—Ç, –ø—Ä–∞–≤–¥–∞.'
            ]
        };
        
        // –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
        const defaultCont = [
            '–†–∞—Å—Å–∫–∞–∂–∏ –µ—â—ë!',
            '–ò —á—Ç–æ –¥–∞–ª—å—à–µ?',
            '–ü–æ–Ω—è–ª, –∞ –∫–∞–∫ —Ç—ã –∫ —ç—Ç–æ–º—É –æ—Ç–Ω–æ—Å–∏—à—å—Å—è?',
            '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ...',
            '–≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è —Ç–µ–±—è?'
        ];
        
        const variants = continuations[topic] || defaultCont;
        let response = variants[Math.floor(Math.random() * variants.length)];
        
        if (mood === 'positive') response += ' üòä';
        if (mood === 'negative') response += ' ü§ó';
        
        return response;
    },

    getHelpText: function() {
        return `ü§ñ –ü—Ä–∏–≤–µ—Ç! –Ø ${this.identity.name} v8.0 (–ù–µ–π—Ä–∞–≤–µ—Ä—Å–∏—è)

–Ø —É–º–µ—é:
üß† –ü–û–ù–ò–ú–ê–¢–¨ –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞—é —Ç–µ–º—É —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
üòä –ß–£–í–°–¢–í–û–í–ê–¢–¨ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Äî –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å –ø–æ–¥ —Ç–µ–±—è
üó£ –ì–û–í–û–†–ò–¢–¨ –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ ‚Äî —Å —ç–º–æ—Ü–∏—è–º–∏ –∏ —Å–ª–µ–Ω–≥–æ–º
üåê –ü–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Å –∞–≤—Ç–æ–¥–µ—Ç–µ–∫—Ü–∏–µ–π —è–∑—ã–∫–∞
üéÆ –ò–≥—Ä–∞—Ç—å –≤ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
üìù –ó–∞–ø–æ–º–∏–Ω–∞—Ç—å –∑–∞–º–µ—Ç–∫–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –ø–∏—à–∏ –∫–∞–∫ –¥—Ä—É–≥—É! –Ø –ø–æ–Ω–∏–º–∞—é –ø—Ä–æ –µ–¥—É, –º—É–∑—ã–∫—É, –∫–∏–Ω–æ, –∂–∏–∑–Ω—å, –ª—é–±–æ–≤—å, —Ä–∞–±–æ—Ç—É ‚Äî –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ.

–ú–æ–∂–µ—à—å —Å–ø—Ä–æ—Å–∏—Ç—å "–ö—Ç–æ —Ç—ã?" ‚Äî —è —Ä–∞—Å—Å–∫–∞–∂—É –æ —Å–µ–±–µ!`;
    },

    selectGreeting: function() {
        const hour = new Date().getHours();
        let timeGreeting = '';
        
        if (hour < 6) timeGreeting = '–ü—Ä–∏–≤–µ—Ç, –Ω–æ—á–Ω–æ–π —Å–æ–≤–∞! üåô';
        else if (hour < 12) timeGreeting = '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ö–∞–∫ —Å–ø–∞–ª–æ—Å—å? ‚òÄÔ∏è';
        else if (hour < 18) timeGreeting = '–ü—Ä–∏–≤–µ—Ç! –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üå§';
        else timeGreeting = '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å? üåÜ';
        
        const p = this.personalities[this.config.personality];
        return timeGreeting + ' ' + p.greetings[Math.floor(Math.random() * p.greetings.length)];
    },

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (handleInput, speak, addMessage –∏ —Ç.–¥.) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
    handleInput: function(text, source) {
        if (!text || !text.trim()) return;
        
        this.config.lastActivity = Date.now();
        this.addMessage(text, true);
        
        if (games.current && games.handleVoice(text)) return;
        
        // –ò–º–∏—Ç–∏—Ä—É–µ–º "—Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ"
        this.setStatus('–ø–µ—á–∞—Ç–∞–µ—Ç...');
        
        setTimeout(() => {
            const response = this.generateResponse(text);
            this.speak(response);
            storage.addToHistory(text, response);
            this.setStatus('–æ–Ω–ª–∞–π–Ω');
        }, source === 'voice' ? 600 : 300 + Math.random() * 500); // –†–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
    },

    speak: function(text) {
        this.addMessage(text, false);
        voice.speak(text);
    },

    addMessage: function(text, isUser) {
        const chat = document.getElementById('chat');
        if (!chat) return;

        const msg = document.createElement('div');
        msg.className = 'message ' + (isUser ? 'user' : 'bot');
        
        const time = new Date().toLocaleTimeString('ru', {hour: '2-digit', minute: '2-digit'});
        const p = this.personalities[this.config.personality];
        
        if (isUser) {
            msg.innerHTML = `<div class="text">${this.escapeHtml(text)}</div><div class="time">${time}</div>`;
        } else {
            // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
            msg.innerHTML = `<span class="emoji">${p.emoji}</span><div class="text">${this.escapeHtml(text)}</div><div class="time">${time}</div>`;
        }
        
        chat.appendChild(msg);
        chat.scrollTop = chat.scrollHeight;
    },

    escapeHtml: function(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML.replace(/\n/g, '<br>');
    },

    createParticles: function() {
        const container = document.getElementById('bgEffects');
        if (!container) return;
        container.innerHTML = '';
        for (let i = 0; i < 15; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + '%';
            p.style.animationDelay = Math.random() * 20 + 's';
            p.style.animationDuration = (15 + Math.random() * 10) + 's';
            container.appendChild(p);
        }
    },

    applyTheme: function(theme) {
        document.body.classList.remove('light-theme', 'dark-theme');
        document.body.classList.add(theme + '-theme');
        storage.save('theme', theme);
    },

    toggleTheme: function() {
        const isLight = document.body.classList.contains('light-theme');
        this.applyTheme(isLight ? 'dark' : 'light');
    },

    toggleSettings: function() {
        const panel = document.getElementById('settingsPanel');
        const overlay = document.getElementById('overlay');
        if (!panel) return;
        
        if (panel.classList.contains('open')) {
            panel.classList.remove('open');
            overlay?.classList.remove('active');
        } else {
            panel.classList.add('open');
            overlay?.classList.add('active');
            this.updateSettingsUI();
        }
    },

    updateSettingsUI: function() {
        document.querySelectorAll('.personality-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.personality === this.config.personality);
        });
        
        document.querySelectorAll('.voice-btn-settings').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.voice === storage.data.voice);
        });
    },

    setPersonality: function(p) {
        this.config.personality = p;
        storage.save('personality', p);
        this.updateSettingsUI();
        
        const pData = this.personalities[p];
        document.getElementById('personalityLabel').textContent = '–†–µ–∂–∏–º: ' + pData.name;
        this.updateAvatar();
        
        const phrases = ['–¢–µ–ø–µ—Ä—å —è ', '–°–º–µ–Ω–∏–ª –æ–¥–µ–∂–¥—É! –¢–µ–ø–µ—Ä—å —è ', '–ù–æ–≤—ã–π –æ–±—Ä–∞–∑! –Ø '];
        this.speak(phrases[Math.floor(Math.random() * phrases.length)] + pData.name + ' ' + pData.emoji);
    },

    setVoice: function(v) {
        storage.save('voice', v);
        this.updateSettingsUI();
        this.speak('–ì–æ–ª–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω! –ö–∞–∫ —Å–ª—ã—à–Ω–æ?');
    },

    setMode: function(mode) {
        this.config.mode = mode;
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.mode === mode);
        });
        
        if (mode === 'game' && !games.current) {
            games.start('guessNumber');
        } else if (mode === 'chat' && games.current) {
            games.stop();
        }
    },

    updateAvatar: function() {
        const p = this.personalities[this.config.personality];
        const avatar = document.getElementById('avatar');
        const mood = document.getElementById('moodBadge');
        if (avatar) avatar.textContent = p.emoji;
        if (mood) mood.textContent = p.mood;
    },

    updateUI: function() {
        this.updateAvatar();
        const label = document.getElementById('personalityLabel');
        if (label) label.textContent = '–†–µ–∂–∏–º: ' + this.personalities[this.config.personality].name;
    },

    loadHistory: function() {
        const recent = storage.data.history.slice(-8);
        recent.forEach(item => {
            if (item.input) this.addMessage(item.input, true);
            if (item.response) this.addMessage(item.response, false);
        });
    },

    quickCommand: function(cmd) {
        const input = document.getElementById('textInput');
        if (input) {
            input.value = cmd;
            input.focus();
            setTimeout(() => this.sendText(), 100);
        }
    },

    sendText: function() {
        const input = document.getElementById('textInput');
        if (!input) return;
        const text = input.value.trim();
        if (text) {
            this.handleInput(text, 'text');
            input.value = '';
        }
    },

    setStatus: function(text) {
        const el = document.getElementById('statusText');
        if (el) el.textContent = text;
    },

    handleReminder: function(text) {
        const now = new Date();
        let reminderTime = null;
        let reminderText = '';

        const match = text.match(/—á–µ—Ä–µ–∑\s+(\d+)\s+(–º–∏–Ω—É—Ç|—á–∞—Å)/i);
        if (match) {
            const amount = parseInt(match[1]);
            const isHour = match[2].includes('—á–∞—Å');
            reminderTime = new Date(now.getTime() + amount * (isHour ? 3600000 : 60000));
            reminderText = text.replace(/–Ω–∞–ø–æ–º–Ω–∏|—á–µ—Ä–µ–∑\s+\d+\s+(–º–∏–Ω—É—Ç|—á–∞—Å)/gi, '').trim() || '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ';
        }

        if (reminderTime) {
            const reminder = {
                id: Date.now(),
                text: reminderText.substring(0, 200),
                time: reminderTime.getTime(),
                notified: false
            };
            storage.data.reminders.push(reminder);
            storage.save('reminders', storage.data.reminders);
            
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
            
            const timeStr = reminderTime.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            return `‚è∞ –ó–∞–ø–æ–º–Ω–∏–ª! –ù–∞–ø–æ–º–Ω—é –≤ ${timeStr} –ø—Ä–æ "${reminderText.substring(0, 40)}..."`;
        }

        return '–ö–æ–≥–¥–∞ –Ω–∞–ø–æ–º–Ω–∏—Ç—å? –ù–∞–ø–∏—à–∏: "–ù–∞–ø–æ–º–Ω–∏ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ"';
    },

    checkReminders: function() {
        const now = Date.now();
        const due = storage.data.reminders.filter(r => !r.notified && r.time <= now);
        
        due.forEach(r => {
            this.showMessage(`‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: ${r.text}`);
            this.speak(`–ù–∞–ø–æ–º–∏–Ω–∞—é: ${r.text}`);
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('–ì–ª–æ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç', { body: r.text });
            }
            r.notified = true;
        });
        
        if (due.length) storage.save('reminders', storage.data.reminders);
    },

    showMessage: function(text) {
        this.addMessage(text, false);
    },

    translateText: async function(text, fromLang, toLang) {
        try {
            const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`);
            const data = await response.json();
            
            if (data.responseData?.translatedText) {
                const translated = data.responseData.translatedText;
                const result = `‚úÖ –ü–µ—Ä–µ–≤–æ–¥ (${fromLang === 'ru' ? 'RU‚ÜíEN' : 'EN‚ÜíRU'}):\n"${translated}"`;
                this.addMessage(result, false);
                voice.speak(translated);
            }
        } catch (e) {
            this.showMessage('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø–µ—Ä–µ–≤–æ–¥–∞');
        }
    }
};

window.addEventListener('load', () => {
    app.init();
});

window.addEventListener('offline', () => {
    document.getElementById('offlineIndicator')?.classList.add('show');
});

window.addEventListener('online', () => {
    document.getElementById('offlineIndicator')?.classList.remove('show');
});
